@using Microsoft.Extensions.Localization
@using Seagull.Core.Data.Interfaces
@using Seagull.Core.Helper;
@inject IStringLocalizer _localizer
@inject IGlobalSettings _globalSettings
@*@inject ICountryRepository _CountryRepository*@
@model UserViewModel
<!-- ============================ LOGIN POPUP ============================ -->
<!-- Trigger the modal with a button -->
<!-- <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal">LOGIN</button> -->
<!-- Modal -->
<div id="myModal" class="modal fade Login-popup" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">@_localizer.GetString("Web.SignIn")</h4>
            </div>
            <div class="modal-body">
                <form class="form-1" id="login">
                    <div class="col-xs-12 col-sm-6">
                        <label>@_localizer.GetString("Web.SignIn.Email")</label>
                        <input type="email" name="" id="email" required>
                    </div>

                    <div class="col-xs-12 col-sm-6">
                        <label>@_localizer.GetString("Web.SignIn.Password")</label>
                        <input type="password" name="" id="password" required>
                    </div>

                    <button type="submit" id="btnLogin" class="btn-1">@_localizer.GetString("Web.SignIn.Login")</button>
                    <h5>
                        @_localizer.GetString("Web.SignIn.Or")
                        <br>
                        <a href="#" data-toggle="modal" data-target="#myModal-1">@_localizer.GetString("Web.SignIn.CreateAccount")</a>
                    </h5>
                </form>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>
<!-- ============================ // LOGIN POPUP ============================ -->
<!-- ============================ REGISTTRATION POPUP ============================ -->
<!-- Trigger the modal with a button -->
<!-- <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal-1">REGISTTRATION</button> -->
<!-- Modal -->
<div id="myModal-1" class="modal fade Login-popup" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">@_localizer.GetString("Create.Your.Account")</h4>
            </div>
            <div class="modal-body">
                <form class="form-1" id="form_Register">

                    <div class="col-xs-12 col-sm-6">
                        <label>@_localizer.GetString("First.Name")</label>
                        <input type="text" name="FirstName" id="RFirstName" required>
                    </div>

                    <div class="col-xs-12 col-sm-6">
                        <label>@_localizer.GetString("Second.Name")</label>
                        <input type="text" name="SecondName" id="RSecondName" required>
                    </div>

                    <div class="col-xs-12 col-sm-6">
                        <label>@_localizer.GetString("Last.Name")</label>
                        <input type="text" name="LastName" id="RLastName" required>
                    </div>

                    <div class="col-xs-12 col-sm-6">
                        <label>@_localizer.GetString("Email")</label>
                        <input type="email" name="Email" id="REmail" required>
                    </div>

                    <div class="col-xs-12 col-sm-6">
                        <label>@_localizer.GetString("Password")</label>
                        <input type="password" name="Password" id="RPassword" required>
                    </div>

                    <div class="col-xs-12 col-sm-6">
                        <label>@_localizer.GetString("Confirm.Password")</label>
                        <input type="password" name="ConfirmPassword" id="RConfirmPassword" required>
                    </div>

                    <div class="col-xs-12 col-sm-6">
                        <label>@_localizer.GetString("Phone.No")</label>
                        <input type="text" name="PhoneNo" id="RPhoneNo" required>
                    </div>

                    <div class="col-xs-12 col-sm-6">
                        <label>@_localizer.GetString("Birth.Date")</label>
                        <input type="date" name="RBirthDate" id="RBirthDate" required>
                    </div>

                    <div class="col-xs-12 col-sm-6">
                        <div class="custom-select bg-down">
                            <label>@_localizer.GetString("Country")</label>
                            <select id="RCountry">
                               @* @foreach (var item in _CountryRepository.GetAll())
                                {
                                    <option value="@item.Id">@item.Name</option>
                                }*@
                            </select>
                        </div>
                    </div>

                    <div class="col-xs-12 col-sm-6">
                        <label>@_localizer.GetString("City")</label>
                        <input type="text" name="RCity" id="RCity" required>
                    </div>

                    <div class="col-xs-12 col-sm-6">
                        <label>@_localizer.GetString("Full.Address")</label>
                        <input type="text" name="RAddress" id="RAddress" required>
                    </div>

                    <div class="col-xs-12 col-sm-6">
                        <label>@_localizer.GetString("Gender")</label>
                        <br>
                        <label class="radio">
                            @_localizer.GetString("Gender.Male")
                            <input type="radio" checked="checked" value="male" name="Gender">
                            <span class="checkround"></span>
                        </label>
                        <label class="radio">
                            @_localizer.GetString("Gender.Female")
                            <input type="radio" name="Gender" value="female">
                            <span class="checkround"></span>
                        </label>



                    </div>

                    @*<div class="col-xs-12 col-sm-6">
                            <div class="custom-select bg-down">
                                <label>HOW DID YOU KNOWN ABOUT US ?</label>
                                <select>
                                    <option value="0">ABC</option>
                                    <option value="1">Country</option>

                                </select>
                            </div>
                        </div>*@

                    <div class="clearfix"></div>

                    <button type="submit" class="btn-1" id="btnRegister">@_localizer.GetString("Register")</button>
                </form>
            </div>
            <div class="modal-footer">

            </div>
        </div>

    </div>
</div>

<!-- ============================ // REGISTTRATION POPUP ============================ -->
<!-- ============================ PASS ============================ -->
<!-- <button type="button" class="btn btn-info btn-lg" data-toggle="modal" data-target="#myModal2">Pass</button> -->
<!-- Modal -->
<div id="myModal2" class="modal fade pass" role="dialog">
    <div class="modal-dialog">

        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal">&times;</button>
                <h4 class="modal-title">JOHN. J</h4>
            </div>
            <div class="modal-body">
                <div class="div-1">
                    <img src="~/Taqween/images/star.png" class="thumb">
                </div>

                <div class="div-2">
                    <div class="col-xs-6">
                        <img src="~/Taqween/images/right-1.png" class="right">
                    </div>
                    <div class="col-xs-6">
                        <label>PASS</label>
                    </div>
                </div>
            </div>
            <div class="modal-footer">

            </div>
        </div>

    </div>
</div>

<!-- ============================ // PASS ============================ -->
<script>
    // A $( document ).ready() block.
    $(document).ready(function () {
        $("#login").submit(function (event) {
           var postData = { Email: $("#email").val(), Password: $("#password").val(), returnUrl: '@ViewData["ReturnUrl"]' };
           jsondata = {
               model: postData
            };
            //Loading Ajax Busy
            ShowLoading();
           $.ajax({
               type: "POST",
               url: '@Url.Action("EnterLogin", "Login")',
               contentType : 'application/json; charset=utf-8',
               beforeSend: function (xhr) {
                   //xhr.setRequestHeader("RequestVerificationToken",
                   //    $('input:hidden[name="__RequestVerificationToken"]').val());
               },
               dataType: "json",
               data: JSON.stringify(jsondata),
               error: function (xhr) {
                   showNotification('error', '', "Error");
                   //Remove Loading Ajax Busy
                   RemoveLoading();
               },
               success: function (result) {
                   if (result.success) {
                       showNotification('success', '', result.Msg[0]);
                       window.location = result.url;
                   }
                   else {
                       showNotification('error', '', result.Msg[0]);
                       //Remove Loading Ajax Busy
                       RemoveLoading();
                   }
               }
           });
            event.preventDefault();
        });

        $("#form_Register").submit(function (event) {
            var postData = {
                FirstName: $("#RFirstName").val(),
                SecondName: $("#RSecondName").val(),
                LastName: $("#RLastName").val(),
                Email: $("#REmail").val(),
                Password: $("#RPassword").val(),
                ConfirmPassword: $("#RConfirmPassword").val(),
                Mobile: $("#RPhoneNo").val(),
                BirthDate: $("#RBirthDate").val(),
                Country: $("#RCountry").val(),
                City: $("#RCity").val(),
                FullAdress: $("#RAddress").val(),
                Gender: $("input[name='Gender']:checked").val() == "male" ? true : false,
                returnUrl: '@ViewData["ReturnUrl"]'
            };
           jsondata = {
               model: postData
            };
            //Loading Ajax Busy
            ShowLoading();
           $.ajax({
               type: "POST",
               url: '@Url.Action("RegisterUser", "Login")',
               contentType : 'application/json; charset=utf-8',
               beforeSend: function (xhr) {
                   //xhr.setRequestHeader("RequestVerificationToken",
                   //    $('input:hidden[name="__RequestVerificationToken"]').val());
               },
               dataType: "json",
               data: JSON.stringify(jsondata),
               error: function (xhr) {
                   showNotification('error', '', "Error");
                   //Remove Loading Ajax Busy
                   RemoveLoading();
               },
               success: function (result) {
                   if (result.success) {
                       showNotification('success', '', result.Msg[0]);
                       //window.location = result.url;
                       location.reload();
                   }
                   else {
                       showNotification('error', '', result.Msg[0]);
                       //Remove Loading Ajax Busy
                       RemoveLoading();
                   }
               }
           });
            event.preventDefault();
        });
    });

</script>